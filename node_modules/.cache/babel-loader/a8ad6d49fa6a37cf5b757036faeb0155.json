{"ast":null,"code":"var _jsxFileName = \"/media/norhan/New Volume/work/React-projects/test-redux/src/containers/Seller Decision/CreateNewAuctionResell.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Grid, Segment, Label, Card, Form, Button, Input, Message, Select, Divider } from \"semantic-ui-react\";\nimport { orderActions, validatorActions } from \"../../actions\";\nimport * as moment from \"moment\";\n\nclass CreateNewAuctionResell extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      items: []\n    };\n\n    this.componentDidMount = async e => {\n      let items = [];\n      await this.props.viewOrder(this.props.urlOrderId);\n      (await this.props.orderDetailsData.items) && this.props.orderDetailsData.items.map(item => {\n        if (item.post._id === this.props.parentPostId.id && (item.status === \"rejectedByBuyer\" || item.status === \"waitingPickUp\")) {\n          items.push({\n            id: item._id\n          });\n        }\n      });\n      this.setState({\n        items\n      });\n    };\n\n    this.schema = {\n      required: [\"startPrice\"],\n      properties: {\n        startPrice: {\n          title: \"startPrice\",\n          type: \"number\",\n          minimum: 1\n        }\n      }\n    };\n    this.auctionWithMinPriceSchema = {\n      required: [\"startPrice\", \"bidIncrement\"],\n      properties: {\n        startPrice: {\n          title: \"startPrice\",\n          type: \"number\",\n          minimum: 1\n        },\n        bidIncrement: {\n          title: \"bidIncrement\",\n          type: \"number\",\n          minimum: 1\n        }\n      }\n    };\n    this.auctionWithoutMinPriceSchema = {\n      required: [\"bidIncrement\"],\n      properties: {\n        bidIncrement: {\n          title: \"bidIncrement\",\n          type: \"number\",\n          minimum: 1\n        }\n      }\n    };\n\n    this.handleAuctionWithoutMinPriceSubmit = async e => {\n      const {\n        items\n      } = this.state;\n      let flag = false;\n      const body = {\n        items: items,\n        userType: \"seller\"\n      };\n      items.forEach(item => {\n        if (item.startDate !== undefined || null) {\n          flag = true;\n        }\n      });\n\n      if (flag) {\n        await this.props.chooseAuctionWithoutMinPrice(this.props.urlOrderId, body);\n      }\n    };\n\n    this.handleAuctionWithMinPriceSubmit = async e => {\n      const {\n        items\n      } = this.state;\n      let flag = false;\n      const body = {\n        items: items,\n        userType: \"seller\"\n      };\n      await this.props.validateForm(this.schema, body);\n      items.forEach(item => {\n        if (item.startDate !== undefined || null) {\n          flag = true;\n        }\n      });\n      if (flag) await this.props.chooseAuctionWithMinPrice(this.props.urlOrderId, body);\n    };\n\n    this.handleChangeAuction = (e, {\n      name,\n      value\n    }) => {\n      let {\n        items\n      } = this.state;\n\n      if (name === \"startPrice\" || name === \"bidIncrement\") {\n        if (this.props.sellerDecision === \"AuctionWithMinPrice\") {\n          this.props.validateInput(this.auctionWithMinPriceSchema, name, parseInt(value));\n        }\n\n        if (this.props.sellerDecision === \"AuctionWithoutMinPrice\") {\n          this.props.validateInput(this.auctionWithoutMinPriceSchema, name, parseInt(value));\n        }\n\n        items.forEach(item => {\n          item[name] = parseInt(value);\n        });\n      }\n\n      if (name === \"duration\") {\n        let startDate = moment();\n        let endDate = moment(startDate, \"MMMM Do YYYY, h:mm:ss a\").add(value, \"days\").format();\n        items.forEach(item => {\n          item.startDate = startDate.format();\n          item.endDate = endDate;\n        });\n      }\n\n      this.setState({\n        items\n      });\n    };\n\n    this.handleErrorButton = errors => {\n      if (errors && errors.startPrice) return true;\n      if (errors && errors.bidIncrement) return true;\n      return false;\n    };\n  }\n\n  render() {\n    const durationOptions = [{\n      key: 1,\n      value: 1,\n      text: \"1 Day\"\n    }, {\n      key: 2,\n      value: 3,\n      text: \"3 Days\"\n    }, {\n      key: 3,\n      value: 5,\n      text: \"5 Days\"\n    }, {\n      key: 4,\n      value: 7,\n      text: \"7 Days\"\n    }];\n    const {\n      errors\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Segment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      color: \"teal\",\n      size: \"big\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }\n    }, this.props.sellerDecision === \"AuctionWithMinPrice\" ? \" Create New Auction with Min Price\" : \" Create New Auction without Min Price\"), /*#__PURE__*/React.createElement(Grid, {\n      centered: true,\n      columns: 1,\n      style: {\n        padding: \"1em\",\n        margin: \"4%\"\n      },\n      textAlign: \"center\",\n      verticalAlign: \"middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }\n    }, this.props.sellerDecision !== \"AuctionWithoutMinPrice\" && /*#__PURE__*/React.createElement(Grid.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 19\n      }\n    }, \"Minimum Price\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"number\",\n      size: \"large\",\n      placeholder: \"1000 EGP\",\n      onChange: this.handleChangeAuction,\n      name: \"startPrice\",\n      min: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 19\n      }\n    })), errors && errors.startPrice && /*#__PURE__*/React.createElement(Message, {\n      negative: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Message.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }\n    }, errors.startPrice))), /*#__PURE__*/React.createElement(Grid.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }\n    }, \"Bid Increment\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"number\",\n      size: \"large\",\n      placeholder: \"1000 EGP\",\n      onChange: this.handleChangeAuction,\n      name: \"bidIncrement\",\n      min: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    })), errors && errors.bidIncrement && /*#__PURE__*/React.createElement(Message, {\n      negative: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Message.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 19\n      }\n    }, errors.bidIncrement))), /*#__PURE__*/React.createElement(Grid.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    }, \"Duration\"), /*#__PURE__*/React.createElement(Form.Field, {\n      control: Select,\n      name: \"duration\",\n      placeholder: \"Choose Auction Duration...\",\n      options: durationOptions,\n      additionPosition: \"bottom\",\n      onChange: this.handleChangeAuction,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Grid.Row, {\n      style: {\n        marginTop: \"2%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 13\n      }\n    }, \" \", /*#__PURE__*/React.createElement(Button, {\n      disabled: this.handleErrorButton(errors),\n      onClick: this.props.sellerDecision === \"AuctionWithMinPrice\" ? this.handleAuctionWithMinPriceSubmit : this.handleAuctionWithoutMinPriceSubmit,\n      color: \"teal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 15\n      }\n    }, \"Submit\")))));\n  }\n\n}\n\nfunction mapState(state) {\n  const {\n    user,\n    loggedIn\n  } = state.authentication;\n  const {\n    orderDetailsData,\n    returnRequestsOrder,\n    displayedStep\n  } = state.order;\n  const {\n    valid,\n    errors\n  } = state.validation;\n  return {\n    orderDetailsData,\n    displayedStep,\n    user,\n    loggedIn,\n    returnRequestsOrder,\n    valid,\n    errors\n  };\n}\n\nconst actionCreators = {\n  validateInput: validatorActions.validateInput,\n  validateForm: validatorActions.validateForm,\n  chooseAuctionWithMinPrice: orderActions.chooseAuctionWithMinPrice,\n  chooseAuctionWithoutMinPrice: orderActions.chooseAuctionWithoutMinPrice,\n  viewOrder: orderActions.viewOrder\n};\nconst connectedCreateNewAuctionResell = connect(mapState, actionCreators)(CreateNewAuctionResell);\nexport { connectedCreateNewAuctionResell as CreateNewAuctionResell };","map":{"version":3,"sources":["/media/norhan/New Volume/work/React-projects/test-redux/src/containers/Seller Decision/CreateNewAuctionResell.jsx"],"names":["React","Component","connect","Grid","Segment","Label","Card","Form","Button","Input","Message","Select","Divider","orderActions","validatorActions","moment","CreateNewAuctionResell","state","items","componentDidMount","e","props","viewOrder","urlOrderId","orderDetailsData","map","item","post","_id","parentPostId","id","status","push","setState","schema","required","properties","startPrice","title","type","minimum","auctionWithMinPriceSchema","bidIncrement","auctionWithoutMinPriceSchema","handleAuctionWithoutMinPriceSubmit","flag","body","userType","forEach","startDate","undefined","chooseAuctionWithoutMinPrice","handleAuctionWithMinPriceSubmit","validateForm","chooseAuctionWithMinPrice","handleChangeAuction","name","value","sellerDecision","validateInput","parseInt","endDate","add","format","handleErrorButton","errors","render","durationOptions","key","text","padding","margin","marginTop","mapState","user","loggedIn","authentication","returnRequestsOrder","displayedStep","order","valid","validation","actionCreators","connectedCreateNewAuctionResell"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Grid,\r\n  Segment,\r\n  Label,\r\n  Card,\r\n  Form,\r\n  Button,\r\n  Input,\r\n  Message,\r\n  Select, \r\n  Divider,\r\n} from \"semantic-ui-react\";\r\nimport { orderActions, validatorActions } from \"../../actions\";\r\nimport * as moment from \"moment\";\r\n\r\nclass CreateNewAuctionResell extends Component {\r\n  state = { items: [] };\r\n\r\n  componentDidMount = async (e) => {\r\n    let items = [];\r\n    await this.props.viewOrder(this.props.urlOrderId);\r\n\r\n    (await this.props.orderDetailsData.items) &&\r\n      this.props.orderDetailsData.items.map((item) => {\r\n        if (item.post._id === this.props.parentPostId.id && (item.status ===\"rejectedByBuyer\"||item.status ===\"waitingPickUp\")) {\r\n          items.push({ id: item._id });\r\n        }\r\n      });\r\n\r\n    this.setState({ items });\r\n  };\r\n\r\n  \r\n  schema = {\r\n    required: [\"startPrice\"],\r\n    properties: {\r\n      startPrice: {\r\n        title: \"startPrice\",\r\n        type: \"number\",\r\n        minimum: 1,\r\n      },\r\n    },\r\n  };\r\n\r\n  auctionWithMinPriceSchema = {\r\n    required: [\"startPrice\", \"bidIncrement\"],\r\n    properties: {\r\n      startPrice: {\r\n        title: \"startPrice\",\r\n        type: \"number\",\r\n        minimum: 1,\r\n      },\r\n      bidIncrement: {\r\n        title: \"bidIncrement\",\r\n        type: \"number\",\r\n        minimum: 1,\r\n      },\r\n    },\r\n  };\r\n  auctionWithoutMinPriceSchema = {\r\n    required: [\"bidIncrement\"],\r\n    properties: {\r\n      bidIncrement: {\r\n        title: \"bidIncrement\",\r\n        type: \"number\",\r\n        minimum: 1,\r\n      },\r\n      \r\n    },\r\n  };\r\n\r\n  handleAuctionWithoutMinPriceSubmit = async (e) => {\r\n    const { items } = this.state;\r\n    let flag = false;\r\n    const body = { items: items, userType: \"seller\" };\r\n    items.forEach((item) => {\r\n      if (item.startDate !== undefined || null) {\r\n        flag = true;\r\n      }\r\n    \r\n    });\r\n\r\n    if (flag) {\r\n      await this.props.chooseAuctionWithoutMinPrice(\r\n        this.props.urlOrderId,\r\n        body\r\n      );\r\n    }\r\n  };\r\n\r\n  handleAuctionWithMinPriceSubmit = async (e) => {\r\n    const { items } = this.state;\r\n    let flag = false;\r\n    const body = { items: items, userType: \"seller\" };\r\n    await this.props.validateForm(this.schema, body);\r\n    items.forEach((item) => {\r\n      if (item.startDate !== undefined || null) {\r\n        flag = true;\r\n      }\r\n    });\r\n\r\n    if (flag)\r\n      await this.props.chooseAuctionWithMinPrice(this.props.urlOrderId, body);\r\n  };\r\n\r\n  handleChangeAuction = (e, { name, value }) => {\r\n    let { items } = this.state;\r\n    if (name === \"startPrice\" || name === \"bidIncrement\") {\r\n      if (this.props.sellerDecision === \"AuctionWithMinPrice\") {\r\n        this.props.validateInput(\r\n          this.auctionWithMinPriceSchema,\r\n          name,\r\n          parseInt(value)\r\n        );\r\n      }\r\n\r\n      if (this.props.sellerDecision === \"AuctionWithoutMinPrice\") {\r\n        this.props.validateInput(\r\n          this.auctionWithoutMinPriceSchema,\r\n          name,\r\n          parseInt(value)\r\n        );\r\n      }\r\n\r\n      items.forEach((item) => {\r\n        item[name] = parseInt(value);\r\n      });\r\n    }\r\n\r\n    if (name === \"duration\") {\r\n      let startDate = moment();\r\n      let endDate = moment(startDate, \"MMMM Do YYYY, h:mm:ss a\")\r\n        .add(value, \"days\")\r\n        .format();\r\n\r\n      items.forEach((item) => {\r\n        item.startDate = startDate.format();\r\n        item.endDate = endDate;\r\n      });\r\n    }\r\n\r\n    this.setState({ items });\r\n  };\r\n\r\n  handleErrorButton = (errors) => {\r\n    if (errors && errors.startPrice) return true;\r\n    if (errors && errors.bidIncrement) return true;\r\n    return false;\r\n  };\r\n\r\n  render() {\r\n    const durationOptions = [\r\n      { key: 1, value: 1, text: \"1 Day\" },\r\n      { key: 2, value: 3, text: \"3 Days\" },\r\n      { key: 3, value: 5, text: \"5 Days\" },\r\n      { key: 4, value: 7, text: \"7 Days\" },\r\n    ];\r\n    const { errors } = this.props;\r\n    return (\r\n      <Segment>\r\n        <Label color='teal' size='big'>\r\n          {this.props.sellerDecision === \"AuctionWithMinPrice\"\r\n            ? \" Create New Auction with Min Price\"\r\n            : \" Create New Auction without Min Price\"}\r\n        </Label>\r\n        <Grid\r\n          centered\r\n          columns={1}\r\n          style={{ padding: \"1em\", margin: \"4%\" }}\r\n          textAlign='center'\r\n          verticalAlign='middle'\r\n        >\r\n          <Grid.Column>\r\n            {this.props.sellerDecision !== \"AuctionWithoutMinPrice\" && (\r\n              <Grid.Row>\r\n                <Form.Field>\r\n                  <label>Minimum Price</label>\r\n                  <Input\r\n                    type='number'\r\n                    size='large'\r\n                    placeholder='1000 EGP'\r\n                    onChange={this.handleChangeAuction}\r\n                    name='startPrice'\r\n                    min={1}\r\n                  />\r\n                </Form.Field>\r\n                {errors && errors.startPrice && (\r\n                  <Message negative>\r\n                    <Message.Header>{errors.startPrice}</Message.Header>\r\n                  </Message>\r\n                )}\r\n              </Grid.Row>\r\n            )}\r\n\r\n            <Grid.Row>\r\n              <Form.Field>\r\n                <label>Bid Increment</label>\r\n                <Input\r\n                  type='number'\r\n                  size='large'\r\n                  placeholder='1000 EGP'\r\n                  onChange={this.handleChangeAuction}\r\n                  name='bidIncrement'\r\n                  min={1}\r\n                />\r\n              </Form.Field>\r\n              {errors && errors.bidIncrement && (\r\n                <Message negative>\r\n                  <Message.Header>{errors.bidIncrement}</Message.Header>\r\n                </Message>\r\n              )}\r\n            </Grid.Row>\r\n            <Grid.Row>\r\n              <label>Duration</label>\r\n              <Form.Field\r\n                control={Select}\r\n                name='duration'\r\n                placeholder='Choose Auction Duration...'\r\n                options={durationOptions}\r\n                additionPosition='bottom'\r\n                onChange={this.handleChangeAuction}\r\n              />\r\n            </Grid.Row>\r\n            <Grid.Row style={{ marginTop: \"2%\" }}>\r\n              {\" \"}\r\n              <Button\r\n              disabled={this.handleErrorButton(errors)}\r\n                onClick={\r\n                  this.props.sellerDecision === \"AuctionWithMinPrice\"\r\n                    ? this.handleAuctionWithMinPriceSubmit\r\n                    : this.handleAuctionWithoutMinPriceSubmit\r\n                }\r\n                color='teal'\r\n              >\r\n                Submit\r\n              </Button>\r\n            </Grid.Row>\r\n          </Grid.Column>\r\n        </Grid>\r\n\r\n      </Segment>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapState(state) {\r\n  const { user, loggedIn } = state.authentication;\r\n  const { orderDetailsData, returnRequestsOrder, displayedStep } = state.order;\r\n  const { valid, errors } = state.validation;\r\n  return {\r\n    orderDetailsData,\r\n    displayedStep,\r\n    user,\r\n    loggedIn,\r\n    returnRequestsOrder,\r\n    valid,\r\n    errors,\r\n  };\r\n}\r\n\r\nconst actionCreators = {\r\n  validateInput: validatorActions.validateInput,\r\n  validateForm: validatorActions.validateForm,\r\n  chooseAuctionWithMinPrice: orderActions.chooseAuctionWithMinPrice,\r\n  chooseAuctionWithoutMinPrice: orderActions.chooseAuctionWithoutMinPrice,\r\n  viewOrder: orderActions.viewOrder,\r\n};\r\n\r\nconst connectedCreateNewAuctionResell = connect(\r\n  mapState,\r\n  actionCreators\r\n)(CreateNewAuctionResell);\r\n\r\nexport { connectedCreateNewAuctionResell as CreateNewAuctionResell };\r\n"]},"metadata":{},"sourceType":"module"}