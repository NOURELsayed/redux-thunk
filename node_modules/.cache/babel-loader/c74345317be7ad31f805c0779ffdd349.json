{"ast":null,"code":"var _jsxFileName = \"/media/norhan/New Volume/work/React-projects/test-redux/src/containers/CreatePostPage/CreatePostPage.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Button, Form, Header, Icon, Segment, Step } from \"semantic-ui-react\";\nimport { alertService } from \"../../services\";\nimport { Step1 } from \"./Step1\";\nimport { postActions } from \"../../actions\";\nimport { Step2 } from \"./Step2\";\nimport { Step3 } from \"./Step3\";\nimport { Step4 } from \"./Step4\";\nimport { Step5 } from \"./Step5\";\nimport EditPostModal from \"./EditPostModal\";\nimport CheckEmailModal from \"../../components/EmailCheckModal/CheckEmailModal\";\nimport { history } from '../../helpers';\n\nclass CreatePostPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      userEmailFound: {}\n    };\n\n    this._next = () => {\n      this.props.stepIncrement();\n    };\n\n    this._prev = () => {\n      this.props.stepDecrement();\n    };\n\n    this.proceedToSubmit = () => {\n      const {\n        sellingData\n      } = this.props.post;\n      if (sellingData.sellingMethod === \"buyNow\" && sellingData.price) return false;\n      if (sellingData.sellingMethod === \"auctionWithoutMinPrice\" && sellingData.duration) return false;\n      if (sellingData.sellingMethod === \"auctionWithMinPrice\" && sellingData.duration && sellingData.minPrice) return false;\n      if (sellingData.sellingMethod === \"auctionWithMinPriceAndBuyNow\" && sellingData.duration && sellingData.minPrice && sellingData.price) return false;\n      if (sellingData.sellingMethod === \"auctionWithoutMinPriceAndBuyNow\" && sellingData.duration && sellingData.price) return false;\n      return true;\n    };\n\n    this.proceedToNext = step => {\n      const {\n        selectedCategory,\n        mainData,\n        itemData,\n        files,\n        postOldImages\n      } = this.props.post;\n      const {\n        validationErrors\n      } = this.props;\n\n      switch (step) {\n        case 1:\n          if (selectedCategory.id && Object.entries(validationErrors).length === 0) {\n            return false;\n          } else return true;\n\n        case 2:\n          if (mainData.condition && mainData.title && mainData.originalQuantity && Object.entries(validationErrors).length === 0) {\n            if (mainData.warranty === true && mainData.expiryDate) {\n              return false;\n            } else if (mainData.warranty === false) {\n              return false;\n            } else {\n              return true;\n            }\n          }\n\n          return true;\n\n        case 3:\n          if (Object.keys(itemData).length === Object.values(itemData).length && Object.values(itemData).includes(\"\") !== true && Object.entries(validationErrors).length === 0) {\n            return false;\n          } else return true;\n\n        case 4:\n          if ((files.length || postOldImages.length) && Object.entries(validationErrors).length === 0) {\n            return false;\n          } else return true;\n\n        default:\n          return false;\n      }\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        user\n      } = this.props;\n      const {\n        selectedCategory,\n        mainData,\n        itemData,\n        sellingData,\n        files,\n        postOldImages\n      } = this.props.post;\n      const description = itemData.description;\n      const post = {\n        promotionPlan: sellingData.promotionPlan,\n        postOldImages: postOldImages,\n        category: selectedCategory.id,\n        seller: user.id,\n        title: mainData.title,\n        sellingMethod: sellingData.sellingMethod,\n        price: parseInt(sellingData.price),\n        condition: mainData.condition,\n        warranty: {\n          exists: mainData.warranty,\n          expiryDate: mainData.expiryDate\n        },\n        originalQuantity: parseInt(mainData.originalQuantity),\n        english: {\n          description: description,\n          data: itemData\n        },\n        auctionData: {\n          interval: sellingData.duration,\n          startPrice: sellingData.minPrice,\n          bidIncrement: parseInt(sellingData.bidIncrement)\n        }\n      };\n      const postData = new FormData();\n\n      for (let x = 0; x < files.length; x++) {\n        postData.append(\"myFiles\", files[x]);\n      }\n\n      postData.append(\"data\", JSON.stringify(post));\n      if (this.props.edit) await this.props.editWholePost(postData, this.props.editPostDetails._id, this.props.editPostDetails.status);else await this.props.add(postData);\n    };\n\n    this.handleCloseModal = async postOnline => {\n      if (postOnline) await this.props.takePostOnline(this.props.editPostDetails._id);\n      await this.props.editPostDone(this.props.editPostDetails._id);\n    };\n\n    this.handleCloseEmailModal = () => {\n      if (this.state.userEmailFound.email) history.push(\"/\");else history.push(\"/profile/\");\n    };\n  }\n\n  async componentDidMount() {\n    if (this.props.user.email) {\n      const {\n        email\n      } = this.props.user;\n      this.setState({\n        userEmailFound: {\n          email: email.address,\n          isVerified: email.isVerified\n        }\n      });\n    }\n\n    await this.props.resetPostDetails();\n  }\n\n  get nextButton() {\n    const {\n      currentStep\n    } = this.props.post;\n    return currentStep < 5 ? /*#__PURE__*/React.createElement(Button, {\n      color: \"teal\",\n      disabled: this.proceedToNext(currentStep),\n      content: \"Next\",\n      onClick: this._next,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }\n    }) : null;\n  }\n\n  get previousButton() {\n    const {\n      currentStep\n    } = this.props.post;\n    return currentStep !== 1 ? /*#__PURE__*/React.createElement(Button, {\n      color: \"teal\",\n      content: \"Previous\",\n      onClick: this._prev,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 7\n      }\n    }) : null;\n  }\n\n  get submitButton() {\n    const {\n      currentStep\n    } = this.props.post;\n    return currentStep === 5 ? /*#__PURE__*/React.createElement(Button, {\n      color: \"blue\",\n      disabled: Object.entries(this.props.validationErrors).length !== 0 && this.proceedToSubmit,\n      content: this.props.edit ? \"Submit Edit\" : \"Add Post\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 7\n      }\n    }) : null;\n  }\n  /*\r\n  validate = () => {\r\n    const {currentStep} = this.props.post;\r\n    switch (currentStep) {\r\n      case 1:\r\n        // this.props.validateInput(this.schema, 'category', this.props.post.selectedCategory);\r\n        // this.props.validateInput(this.schema, 'category', this.props.post.selectedSubcategory);\r\n        return;\r\n      case 2:\r\n        return;\r\n      default:\r\n    }\r\n  };\r\n  */\n\n  /*\r\n  buildErrors = (errors) => {\r\n    const {error} = errors;\r\n    if (error) {\r\n      const humanErrors = validatorService.buildHumanErrorsWithoutSchema(error);\r\n      return (\r\n        <Message error>\r\n          <Message.Header>Please fix the following errors and try again</Message.Header>\r\n          <Message.List>\r\n            {humanErrors.map(err => <Message.Item>{err}</Message.Item>)}\r\n          </Message.List>\r\n        </Message>\r\n      );\r\n    } else return [];\r\n  };\r\n  */\n\n\n  render() {\n    const {\n      post,\n      alert,\n      category,\n      editPostDetails,\n      edit\n    } = this.props;\n    const {\n      loading,\n      currentStep,\n      editWholePostSuccess\n    } = post; // const postErrors = this.buildErrors(post.errors);\n\n    const alerts = alertService.getAlerts(alert);\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 7\n      }\n    }, !this.state.userEmailFound.isVerified && /*#__PURE__*/React.createElement(CheckEmailModal, {\n      showModal: true,\n      userEmail: this.state.userEmailFound,\n      handleCloseModal: this.handleCloseEmailModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }\n    }), editWholePostSuccess && editPostDetails.status === 'standBy' && /*#__PURE__*/React.createElement(EditPostModal, {\n      editWholePostSuccess: editWholePostSuccess,\n      handleCloseModal: this.handleCloseModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Segment, {\n      textAlign: \"center\",\n      style: {\n        padding: \"0em 3em\"\n      },\n      vertical: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h3\",\n      color: \"teal\",\n      style: {\n        fontSize: \"3em\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 11\n      }\n    }, edit ? 'Edit Post' : 'Add New Post'), /*#__PURE__*/React.createElement(Step.Group, {\n      widths: 5,\n      attached: \"top\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Step, {\n      active: currentStep === 1,\n      disabled: currentStep !== 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"hand point right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Step.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Step.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 17\n      }\n    }, \"Select Category\"))), /*#__PURE__*/React.createElement(Step, {\n      active: currentStep === 2,\n      disabled: currentStep !== 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"hand point right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Step.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Step.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 17\n      }\n    }, \"Main Details\"))), /*#__PURE__*/React.createElement(Step, {\n      active: currentStep === 3,\n      disabled: currentStep !== 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"hand point right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Step.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Step.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }\n    }, \"Item Details\"))), /*#__PURE__*/React.createElement(Step, {\n      active: currentStep === 4,\n      disabled: currentStep !== 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"hand point right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Step.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Step.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 17\n      }\n    }, \"Select Images\"))), /*#__PURE__*/React.createElement(Step, {\n      active: currentStep === 5,\n      disabled: currentStep !== 5,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"hand point right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Step.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Step.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 17\n      }\n    }, \"Selling Format\")))), alerts, /*#__PURE__*/React.createElement(Form, {\n      loading: loading,\n      size: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Segment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Step1, {\n      edit: this.props.edit,\n      category: category && category.childrenTree,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Step2, {\n      edit: this.props.edit,\n      editPostDetails: editPostDetails,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Step3, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Step4, {\n      edit: this.props.edit,\n      editPostDetails: editPostDetails,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Step5, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 15\n      }\n    }), this.previousButton, this.nextButton, this.submitButton))));\n  }\n\n}\n\nfunction mapState(state) {\n  const {\n    alert,\n    post\n  } = state;\n  const user = state.authentication.user;\n  const {\n    valid,\n    errorsNumber,\n    errors: validationErrors\n  } = state.validation;\n  return {\n    user,\n    post,\n    valid,\n    alert,\n    errorsNumber,\n    validationErrors\n  };\n}\n\nconst actionCreators = {\n  add: postActions.add,\n  stepIncrement: postActions.stepIncrement,\n  stepDecrement: postActions.stepDecrement,\n  resetPostDetails: postActions.resetPostDetails,\n  editWholePost: postActions.editWholePost,\n  takePostOnline: postActions.takePostOnline,\n  editPostDone: postActions.editPostDone // validateInput: validatorActions.validateInput,\n\n};\nconst connectedCreatePostPage = connect(mapState, actionCreators)(CreatePostPage);\nexport { connectedCreatePostPage as CreatePostPage };","map":{"version":3,"sources":["/media/norhan/New Volume/work/React-projects/test-redux/src/containers/CreatePostPage/CreatePostPage.jsx"],"names":["React","Component","connect","Button","Form","Header","Icon","Segment","Step","alertService","Step1","postActions","Step2","Step3","Step4","Step5","EditPostModal","CheckEmailModal","history","CreatePostPage","state","userEmailFound","_next","props","stepIncrement","_prev","stepDecrement","proceedToSubmit","sellingData","post","sellingMethod","price","duration","minPrice","proceedToNext","step","selectedCategory","mainData","itemData","files","postOldImages","validationErrors","id","Object","entries","length","condition","title","originalQuantity","warranty","expiryDate","keys","values","includes","handleSubmit","e","preventDefault","user","description","promotionPlan","category","seller","parseInt","exists","english","data","auctionData","interval","startPrice","bidIncrement","postData","FormData","x","append","JSON","stringify","edit","editWholePost","editPostDetails","_id","status","add","handleCloseModal","postOnline","takePostOnline","editPostDone","handleCloseEmailModal","email","push","componentDidMount","setState","address","isVerified","resetPostDetails","nextButton","currentStep","previousButton","submitButton","render","alert","loading","editWholePostSuccess","alerts","getAlerts","padding","fontSize","childrenTree","mapState","authentication","valid","errorsNumber","errors","validation","actionCreators","connectedCreatePostPage"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Button, Form, Header, Icon, Segment, Step } from \"semantic-ui-react\";\r\nimport { alertService } from \"../../services\";\r\nimport { Step1 } from \"./Step1\";\r\nimport { postActions } from \"../../actions\";\r\nimport { Step2 } from \"./Step2\";\r\nimport { Step3 } from \"./Step3\";\r\nimport { Step4 } from \"./Step4\";\r\nimport { Step5 } from \"./Step5\";\r\nimport EditPostModal from \"./EditPostModal\";\r\nimport CheckEmailModal from \"../../components/EmailCheckModal/CheckEmailModal\";\r\nimport { history } from '../../helpers';\r\n\r\nclass CreatePostPage extends Component {\r\n  state = {\r\n    userEmailFound: {}\r\n  }\r\n\r\n  async componentDidMount() {\r\n    if (this.props.user.email) {\r\n      const { email } = this.props.user;\r\n      this.setState({ userEmailFound: { email: email.address, isVerified: email.isVerified } });\r\n    }\r\n    await this.props.resetPostDetails();\r\n  }\r\n\r\n  _next = () => {\r\n    this.props.stepIncrement();\r\n  };\r\n\r\n  _prev = () => {\r\n    this.props.stepDecrement();\r\n  };\r\n  proceedToSubmit = () => {\r\n    const { sellingData } = this.props.post;\r\n    if (sellingData.sellingMethod === \"buyNow\" && sellingData.price) \r\n      return false;\r\n    \r\n    if (\r\n      sellingData.sellingMethod === \"auctionWithoutMinPrice\" &&\r\n      sellingData.duration\r\n    )\r\n      return false;\r\n    if (\r\n      sellingData.sellingMethod === \"auctionWithMinPrice\" &&\r\n      sellingData.duration &&\r\n      sellingData.minPrice\r\n    )\r\n      return false;\r\n    if (\r\n      sellingData.sellingMethod === \"auctionWithMinPriceAndBuyNow\" &&\r\n      sellingData.duration &&\r\n      sellingData.minPrice &&\r\n      sellingData.price\r\n    )\r\n      return false;\r\n    if (\r\n      sellingData.sellingMethod === \"auctionWithoutMinPriceAndBuyNow\" &&\r\n      sellingData.duration &&\r\n      sellingData.price\r\n    )\r\n      return false;\r\n    return true;\r\n  };\r\n  proceedToNext = (step) => {\r\n    const { selectedCategory, mainData, itemData, files, postOldImages } = this.props.post;\r\n    const { validationErrors } = this.props;\r\n\r\n    switch (step) {\r\n      case 1:\r\n        if (\r\n          selectedCategory.id &&\r\n          Object.entries(validationErrors).length === 0\r\n        ) {\r\n          return false;\r\n        } else return true;\r\n      case 2:\r\n        if (\r\n          mainData.condition &&\r\n          mainData.title &&\r\n          mainData.originalQuantity &&\r\n          Object.entries(validationErrors).length === 0\r\n        ) {\r\n          if (mainData.warranty === true && mainData.expiryDate) {\r\n            return false;\r\n          } else if (mainData.warranty === false) {\r\n            return false;\r\n          } else {\r\n            return true;\r\n          }\r\n        }\r\n        return true;\r\n      case 3:\r\n        if (\r\n          Object.keys(itemData).length === Object.values(itemData).length &&\r\n          Object.values(itemData).includes(\"\") !== true &&\r\n          Object.entries(validationErrors).length === 0\r\n        ) {\r\n          return false;\r\n        } else return true;\r\n\r\n      case 4:\r\n        if ((files.length || postOldImages.length) && Object.entries(validationErrors).length === 0) {\r\n          return false;\r\n        } else return true;\r\n      default:\r\n        return false;\r\n    }\r\n  };\r\n  get nextButton() {\r\n    const { currentStep } = this.props.post;\r\n\r\n    return currentStep < 5 ? (\r\n      <Button\r\n        color=\"teal\"\r\n        disabled={this.proceedToNext(currentStep)}\r\n        content=\"Next\"\r\n        onClick={this._next}\r\n      />\r\n    ) : null;\r\n  }\r\n\r\n  get previousButton() {\r\n    const { currentStep } = this.props.post;\r\n    return currentStep !== 1 ? (\r\n      <Button color=\"teal\" content=\"Previous\" onClick={this._prev} />\r\n    ) : null;\r\n  }\r\n\r\n  get submitButton() {\r\n    const { currentStep } = this.props.post;\r\n\r\n    return currentStep === 5 ? (\r\n      <Button\r\n        color=\"blue\"\r\n        disabled={\r\n          Object.entries(this.props.validationErrors).length !== 0 &&\r\n          this.proceedToSubmit\r\n        }\r\n        content={this.props.edit ? \"Submit Edit\" : \"Add Post\"}\r\n        onClick={this.handleSubmit}\r\n      />\r\n    ) : null;\r\n  }\r\n\r\n  /*\r\n  validate = () => {\r\n    const {currentStep} = this.props.post;\r\n    switch (currentStep) {\r\n      case 1:\r\n        // this.props.validateInput(this.schema, 'category', this.props.post.selectedCategory);\r\n        // this.props.validateInput(this.schema, 'category', this.props.post.selectedSubcategory);\r\n        return;\r\n      case 2:\r\n        return;\r\n      default:\r\n    }\r\n  };\r\n  */\r\n\r\n  /*\r\n  buildErrors = (errors) => {\r\n    const {error} = errors;\r\n    if (error) {\r\n      const humanErrors = validatorService.buildHumanErrorsWithoutSchema(error);\r\n      return (\r\n        <Message error>\r\n          <Message.Header>Please fix the following errors and try again</Message.Header>\r\n          <Message.List>\r\n            {humanErrors.map(err => <Message.Item>{err}</Message.Item>)}\r\n          </Message.List>\r\n        </Message>\r\n      );\r\n    } else return [];\r\n  };\r\n  */\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const { user } = this.props;\r\n    const {\r\n      selectedCategory,\r\n      mainData,\r\n      itemData,\r\n      sellingData,\r\n      files,\r\n      postOldImages,\r\n    } = this.props.post;\r\n    const description = itemData.description;\r\n    const post = {\r\n      promotionPlan:sellingData.promotionPlan,\r\n      postOldImages: postOldImages,\r\n      category: selectedCategory.id,\r\n      seller: user.id,\r\n      title: mainData.title,\r\n      sellingMethod: sellingData.sellingMethod,\r\n      price: parseInt(sellingData.price),\r\n      condition: mainData.condition,\r\n      warranty: {\r\n        exists: mainData.warranty,\r\n        expiryDate: mainData.expiryDate,\r\n      },\r\n      originalQuantity: parseInt(mainData.originalQuantity),\r\n      english: {\r\n        description: description,\r\n        data: itemData,\r\n      },\r\n      auctionData: {\r\n        interval: sellingData.duration,\r\n        startPrice: sellingData.minPrice,\r\n        bidIncrement: parseInt(sellingData.bidIncrement),\r\n      },\r\n    };\r\n\r\n    const postData = new FormData();\r\n    for (let x = 0; x < files.length; x++) {\r\n      postData.append(\"myFiles\", files[x]);\r\n    }\r\n    postData.append(\"data\", JSON.stringify(post));\r\n\r\n    if (this.props.edit) await this.props.editWholePost(postData, this.props.editPostDetails._id, this.props.editPostDetails.status);\r\n    else await this.props.add(postData);\r\n  };\r\n\r\n  handleCloseModal = async (postOnline) => {\r\n    if (postOnline) await this.props.takePostOnline(this.props.editPostDetails._id);\r\n    await this.props.editPostDone(this.props.editPostDetails._id);\r\n  }\r\n\r\n  handleCloseEmailModal = () => {\r\n    if (this.state.userEmailFound.email) history.push(\"/\");\r\n    else history.push(\"/profile/\");\r\n  }\r\n\r\n  render() {\r\n    const { post, alert, category, editPostDetails, edit } = this.props;\r\n    const { loading, currentStep, editWholePostSuccess } = post;\r\n    // const postErrors = this.buildErrors(post.errors);\r\n    const alerts = alertService.getAlerts(alert);\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {!this.state.userEmailFound.isVerified && \r\n        <CheckEmailModal \r\n          showModal={true}\r\n          userEmail={this.state.userEmailFound} \r\n          handleCloseModal={this.handleCloseEmailModal}\r\n        />}\r\n        {editWholePostSuccess && editPostDetails.status === 'standBy' &&\r\n        <EditPostModal \r\n          editWholePostSuccess={editWholePostSuccess} \r\n          handleCloseModal={this.handleCloseModal}\r\n        />}\r\n        <Segment textAlign=\"center\" style={{ padding: \"0em 3em\" }} vertical>\r\n          <Header as=\"h3\" color=\"teal\" style={{ fontSize: \"3em\" }}>\r\n            {edit ? 'Edit Post' : 'Add New Post'}\r\n          </Header>\r\n          <Step.Group widths={5} attached=\"top\">\r\n            <Step active={currentStep === 1} disabled={currentStep !== 1}>\r\n              <Icon name=\"hand point right\" />\r\n              <Step.Content>\r\n                <Step.Title>Select Category</Step.Title>\r\n              </Step.Content>\r\n            </Step>\r\n            <Step active={currentStep === 2} disabled={currentStep !== 2}>\r\n              <Icon name=\"hand point right\" />\r\n              <Step.Content>\r\n                <Step.Title>Main Details</Step.Title>\r\n              </Step.Content>\r\n            </Step>\r\n            <Step active={currentStep === 3} disabled={currentStep !== 3}>\r\n              <Icon name=\"hand point right\" />\r\n              <Step.Content>\r\n                <Step.Title>Item Details</Step.Title>\r\n              </Step.Content>\r\n            </Step>\r\n            <Step active={currentStep === 4} disabled={currentStep !== 4}>\r\n              <Icon name=\"hand point right\" />\r\n              <Step.Content>\r\n                <Step.Title>Select Images</Step.Title>\r\n              </Step.Content>\r\n            </Step>\r\n            <Step active={currentStep === 5} disabled={currentStep !== 5}>\r\n              <Icon name=\"hand point right\" />\r\n              <Step.Content>\r\n                <Step.Title>Selling Format</Step.Title>\r\n              </Step.Content>\r\n            </Step>\r\n          </Step.Group>\r\n\r\n          {alerts}\r\n          {/*{postErrors}*/}\r\n\r\n          <Form loading={loading} size=\"large\">\r\n            <Segment>\r\n              <Step1 edit={this.props.edit} category={category && category.childrenTree} />\r\n              <Step2 edit={this.props.edit} editPostDetails={editPostDetails} />\r\n              <Step3 />\r\n              <Step4 edit={this.props.edit} editPostDetails={editPostDetails} />\r\n              <Step5 />\r\n              {this.previousButton}\r\n              {this.nextButton}\r\n              {this.submitButton}\r\n            </Segment>\r\n          </Form>\r\n        </Segment>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapState(state) {\r\n  const { alert, post } = state;\r\n  const user = state.authentication.user;\r\n  const { valid, errorsNumber, errors: validationErrors } = state.validation;\r\n  return { user, post, valid, alert, errorsNumber, validationErrors };\r\n}\r\n\r\nconst actionCreators = {\r\n  add: postActions.add,\r\n  stepIncrement: postActions.stepIncrement,\r\n  stepDecrement: postActions.stepDecrement,\r\n  resetPostDetails: postActions.resetPostDetails,\r\n  editWholePost: postActions.editWholePost,\r\n  takePostOnline: postActions.takePostOnline,\r\n  editPostDone: postActions.editPostDone,\r\n  // validateInput: validatorActions.validateInput,\r\n};\r\n\r\nconst connectedCreatePostPage = connect(\r\n  mapState,\r\n  actionCreators\r\n)(CreatePostPage);\r\nexport { connectedCreatePostPage as CreatePostPage };\r\n"]},"metadata":{},"sourceType":"module"}