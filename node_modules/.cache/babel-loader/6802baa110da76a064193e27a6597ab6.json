{"ast":null,"code":"var _jsxFileName = \"/media/norhan/New Volume/work/React-projects/test-redux/src/containers/OrdersPage/OrderDetailsPage.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Segment, Label, Grid, Card } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\nimport { getFormatedDate } from \"../../components/_shared/DateTimeFormat\";\nimport { OrderItemAsBuyer } from \"./OrderItemAsBuyer\";\nimport { OrderItemAsSeller } from \"./OrderItemAsSeller\";\nimport { getOrderStatus } from \"./shared\";\nimport { orderActions } from \"../../actions\";\nimport { orderConstants } from \"../../constants\";\nimport { ChooseSPAndTime } from \"../ServicePoint/ChooseSPAndTime\";\nimport { formulateReturnPeriodExpiryDate } from \"../../helpers/utils\";\n\nclass OrderDetailsPage extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.sellerDropOffItemsInfo = (picker, date, timeslot, SP) => {\n      this.props.sellerDropOffItemsInfo({\n        date,\n        timeslot,\n        SP,\n        orderId: this.props.match.params.id\n      });\n    };\n\n    this.buyerPickUpItemsInfo = (picker, date, timeslot, SP) => {\n      this.props.buyerPickUpItemsInfo({\n        date,\n        timeslot,\n        SP,\n        orderId: this.props.match.params.id\n      });\n    };\n\n    this.getOrderDetailsUI = (orderDetailsData, orderStatus, returnRequestsOrder) => {\n      const {\n        returnPeriodExpiresAt,\n        combinedDate\n      } = formulateReturnPeriodExpiryDate(orderDetailsData);\n      return this.props.loggedIn && orderDetailsData.sellerData ? /*#__PURE__*/React.createElement(Grid, {\n        style: {\n          padding: \"2em 9em\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Grid.Column, {\n        width: 10,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Segment, {\n        style: {\n          padding: \"1em 1em\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Grid.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        color: \"teal\",\n        size: \"big\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 17\n        }\n      }, \"Order Info\")), /*#__PURE__*/React.createElement(Grid.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Grid.Column, {\n        width: 7,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 19\n        }\n      }, \"Order \"), \" #\", orderDetailsData._id), /*#__PURE__*/React.createElement(Grid.Column, {\n        width: 7,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 19\n        }\n      }, \"Order Placed: \"), getFormatedDate(orderDetailsData.createdAt))), /*#__PURE__*/React.createElement(Grid.Row, {\n        stretched: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Grid.Column, {\n        width: 7,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 19\n        }\n      }, this.props.user.id === orderDetailsData.sellerData.seller || this.props.user.id === orderDetailsData.sellerData.seller._id ? /*#__PURE__*/React.createElement(Card.Content, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Card.Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 25\n        }\n      }, \"Order Buyer\"), /*#__PURE__*/React.createElement(Card.Description, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: `/user/${orderDetailsData.buyerData.buyer._id}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 27\n        }\n      }, orderDetailsData.buyerData.buyer.username))) : /*#__PURE__*/React.createElement(Card.Content, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Card.Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }\n      }, \"Order Picker\"), /*#__PURE__*/React.createElement(Card.Description, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }\n      }, orderDetailsData.buyerData.authorizedPerson ? orderDetailsData.buyerData.authorizedPerson.name : \"Yourself\")))), /*#__PURE__*/React.createElement(Grid.Column, {\n        width: 7,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Card.Content, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Card.Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 23\n        }\n      }, \"Order Summary\"), /*#__PURE__*/React.createElement(Card.Description, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 23\n        }\n      }, orderDetailsData.soldPrice === orderDetailsData.totalPrice ? /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 29\n        }\n      }, \"Total Price : \"), \" \", orderDetailsData.soldPrice, \" LE\") : /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"strike\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 31\n        }\n      }, \"Total Price : \"), \" \", orderDetailsData.totalPrice, \" LE\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 29\n        }\n      }, \"Discounted Price : \"), \" \", orderDetailsData.soldPrice, \" LE\")))))), /*#__PURE__*/React.createElement(Grid.Row, {\n        style: {\n          padding: \"1em 1em\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Segment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Grid.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        color: \"yellow\",\n        size: \"big\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 23\n        }\n      }, \"Items\")), /*#__PURE__*/React.createElement(Grid.Row, {\n        style: {\n          padding: \"1em 1em\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }\n      }, this.props.user.id === orderDetailsData.sellerData.seller || this.props.user.id === orderDetailsData.sellerData.seller._id ? orderDetailsData.items.map(itemData => /*#__PURE__*/React.createElement(OrderItemAsSeller, {\n        returnWindow: returnPeriodExpiresAt,\n        combinedDate: combinedDate,\n        orderData: orderDetailsData,\n        itemData: itemData,\n        key: itemData._id,\n        orderStatus: orderStatus,\n        returnRequest: returnRequestsOrder && returnRequestsOrder.find(e => JSON.stringify(e.item._id) === JSON.stringify(itemData._id)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 29\n        }\n      })) : orderDetailsData.items.map(itemData => /*#__PURE__*/React.createElement(OrderItemAsBuyer, {\n        returnWindow: returnPeriodExpiresAt,\n        combinedDate: combinedDate,\n        orderData: orderDetailsData,\n        itemData: itemData,\n        key: itemData._id,\n        orderStatus: orderStatus,\n        returnRequest: returnRequestsOrder && returnRequestsOrder.find(e => JSON.stringify(e.item._id) === JSON.stringify(itemData._id)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 29\n        }\n      })))))))))) : /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 7\n        }\n      }, \"You are not authorized to access order details, kindly login first\");\n    };\n\n    this.getSellerDropOfDetailsUI = orderId => {\n      return /*#__PURE__*/React.createElement(Grid, {\n        style: {\n          padding: \"2em 9em\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(ChooseSPAndTime, {\n        next: this.sellerDropOffItemsInfo,\n        orderId: this.props.match.params.id,\n        seller: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 9\n        }\n      }));\n    };\n\n    this.getBuyerPickUpDetailsUI = orderId => {\n      return /*#__PURE__*/React.createElement(Grid, {\n        style: {\n          padding: \"2em 9em\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(ChooseSPAndTime, {\n        next: this.buyerPickUpItemsInfo,\n        orderId: this.props.match.params.id,\n        seller: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 9\n        }\n      }));\n    };\n  }\n\n  componentDidMount() {\n    const {\n      displayedStep\n    } = this.props;\n\n    if (displayedStep === orderConstants.SELLER_STEP_DROP_OFF_INFO) {\n      this.props.viewOrderSeller(this.props.match.params.id);\n    } else {\n      this.props.viewOrder(this.props.match.params.id);\n    }\n  }\n\n  render() {\n    const {\n      orderDetailsData,\n      displayedStep,\n      returnRequestsOrder\n    } = this.props;\n    let orderStatus = getOrderStatus(orderDetailsData);\n    return displayedStep && displayedStep === orderConstants.SELLER_STEP_DROP_OFF_INFO ? this.getSellerDropOfDetailsUI(orderDetailsData._id) : displayedStep && displayedStep === orderConstants.BUYER_PICK_UP_INFO ? this.getBuyerPickUpDetailsUI(orderDetailsData._id) : this.getOrderDetailsUI(orderDetailsData, orderStatus, returnRequestsOrder);\n  }\n\n  componentWillUnmount() {\n    this.props.clearState();\n  }\n\n}\n\nfunction mapState(state) {\n  const {\n    user,\n    loggedIn\n  } = state.authentication;\n  const {\n    orderDetailsData,\n    returnRequestsOrder,\n    displayedStep\n  } = state.order;\n  return {\n    orderDetailsData,\n    displayedStep,\n    user,\n    loggedIn,\n    returnRequestsOrder\n  };\n}\n\nconst actionCreators = {\n  viewOrder: orderActions.viewOrder,\n  viewOrderSeller: orderActions.viewOrderSeller,\n  sellerDropOffItemsInfo: orderActions.sellerDropOffItemsInfo,\n  buyerPickUpItemsInfo: orderActions.buyerPickUpItemsInfoUpdate,\n  clearState: orderActions.clearState\n};\nconst connectedOrderDetailsPage = connect(mapState, actionCreators)(OrderDetailsPage);\nexport { connectedOrderDetailsPage as OrderDetailsPage };","map":{"version":3,"sources":["/media/norhan/New Volume/work/React-projects/test-redux/src/containers/OrdersPage/OrderDetailsPage.jsx"],"names":["React","Component","connect","Segment","Label","Grid","Card","Link","getFormatedDate","OrderItemAsBuyer","OrderItemAsSeller","getOrderStatus","orderActions","orderConstants","ChooseSPAndTime","formulateReturnPeriodExpiryDate","OrderDetailsPage","sellerDropOffItemsInfo","picker","date","timeslot","SP","props","orderId","match","params","id","buyerPickUpItemsInfo","getOrderDetailsUI","orderDetailsData","orderStatus","returnRequestsOrder","returnPeriodExpiresAt","combinedDate","loggedIn","sellerData","padding","_id","createdAt","user","seller","buyerData","buyer","username","authorizedPerson","name","soldPrice","totalPrice","items","map","itemData","find","e","JSON","stringify","item","getSellerDropOfDetailsUI","getBuyerPickUpDetailsUI","componentDidMount","displayedStep","SELLER_STEP_DROP_OFF_INFO","viewOrderSeller","viewOrder","render","BUYER_PICK_UP_INFO","componentWillUnmount","clearState","mapState","state","authentication","order","actionCreators","buyerPickUpItemsInfoUpdate","connectedOrderDetailsPage"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Segment, Label, Grid, Card } from \"semantic-ui-react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getFormatedDate } from \"../../components/_shared/DateTimeFormat\";\r\nimport { OrderItemAsBuyer } from \"./OrderItemAsBuyer\";\r\nimport { OrderItemAsSeller } from \"./OrderItemAsSeller\";\r\nimport { getOrderStatus } from \"./shared\";\r\nimport { orderActions } from \"../../actions\";\r\nimport { orderConstants } from \"../../constants\";\r\nimport { ChooseSPAndTime } from \"../ServicePoint/ChooseSPAndTime\";\r\nimport { formulateReturnPeriodExpiryDate } from \"../../helpers/utils\";\r\n\r\nclass OrderDetailsPage extends Component {\r\n  componentDidMount() {\r\n    const { displayedStep} = this.props;\r\n   if( displayedStep === orderConstants.SELLER_STEP_DROP_OFF_INFO){\r\n    this.props.viewOrderSeller(this.props.match.params.id);\r\n   }\r\n   else{\r\n    this.props.viewOrder(this.props.match.params.id);\r\n\r\n   }\r\n  }\r\n\r\n  sellerDropOffItemsInfo = (picker, date, timeslot, SP) => {\r\n    this.props.sellerDropOffItemsInfo({\r\n      date,\r\n      timeslot,\r\n      SP,\r\n      orderId: this.props.match.params.id,\r\n    });\r\n  };\r\n\r\n  buyerPickUpItemsInfo = (picker, date, timeslot, SP) => {\r\n    this.props.buyerPickUpItemsInfo({\r\n      date,\r\n      timeslot,\r\n      SP,\r\n      orderId:this.props.match.params.id,\r\n    });\r\n  };\r\n\r\n  getOrderDetailsUI = (orderDetailsData, orderStatus,returnRequestsOrder) => {\r\n    const {\r\n      returnPeriodExpiresAt,\r\n      combinedDate,\r\n    } = formulateReturnPeriodExpiryDate(orderDetailsData);\r\n\r\n    return this.props.loggedIn && orderDetailsData.sellerData ? (\r\n      <Grid style={{ padding: \"2em 9em\" }}>\r\n        <Grid.Column width={10}>\r\n          <Segment style={{ padding: \"1em 1em\" }}>\r\n            <Grid>\r\n              <Grid.Row>\r\n                <Label color='teal' size='big'>\r\n                  Order Info\r\n                </Label>\r\n              </Grid.Row>\r\n              <Grid.Row>\r\n                <Grid.Column width={7}>\r\n                  <strong>Order </strong> #{orderDetailsData._id}\r\n                </Grid.Column>\r\n                <Grid.Column width={7}>\r\n                  <strong>Order Placed: </strong>\r\n                  {getFormatedDate(orderDetailsData.createdAt)}\r\n                </Grid.Column>\r\n              </Grid.Row>\r\n              <Grid.Row stretched>\r\n                <Grid.Column width={7}>\r\n                  <Card>\r\n                    {this.props.user.id ===\r\n                      orderDetailsData.sellerData.seller ||\r\n                    this.props.user.id ===\r\n                      orderDetailsData.sellerData.seller._id ? (\r\n                      <Card.Content>\r\n                        <Card.Header>Order Buyer</Card.Header>\r\n                        <Card.Description>\r\n                          <Link\r\n                            to={`/user/${orderDetailsData.buyerData.buyer._id}`}\r\n                          >\r\n                            {orderDetailsData.buyerData.buyer.username}\r\n                          </Link>\r\n                        </Card.Description>\r\n                      </Card.Content>\r\n                    ) : (\r\n                      <Card.Content>\r\n                        <Card.Header>Order Picker</Card.Header>\r\n                        <Card.Description>\r\n                          {orderDetailsData.buyerData.authorizedPerson\r\n                            ? orderDetailsData.buyerData.authorizedPerson.name\r\n                            : \"Yourself\"}\r\n                        </Card.Description>\r\n                      </Card.Content>\r\n                    )}\r\n                  </Card>\r\n                </Grid.Column>\r\n                <Grid.Column width={7}>\r\n                  <Card>\r\n                    <Card.Content>\r\n                      <Card.Header>Order Summary</Card.Header>\r\n                      <Card.Description>\r\n                        {orderDetailsData.soldPrice ===\r\n                        orderDetailsData.totalPrice ? (\r\n                          <React.Fragment>\r\n                            <strong>Total Price : </strong>{\" \"}\r\n                            {orderDetailsData.soldPrice} LE\r\n                          </React.Fragment>\r\n                        ) : (\r\n                          <React.Fragment>\r\n                            <strike>\r\n                              <strong>Total Price : </strong>{\" \"}\r\n                              {orderDetailsData.totalPrice} LE\r\n                            </strike>\r\n                            <br />\r\n                            <strong>Discounted Price : </strong>{\" \"}\r\n                            {orderDetailsData.soldPrice} LE\r\n                          </React.Fragment>\r\n                        )}\r\n                      </Card.Description>\r\n                    </Card.Content>\r\n                  </Card>\r\n                </Grid.Column>\r\n              </Grid.Row>\r\n              <Grid.Row style={{ padding: \"1em 1em\" }}>\r\n                <Segment>\r\n                  <Grid>\r\n                    <Grid.Row>\r\n                      <Label color='yellow' size='big'>\r\n                        Items\r\n                      </Label>\r\n                    </Grid.Row>\r\n                    <Grid.Row style={{ padding: \"1em 1em\" }}>\r\n                      {this.props.user.id ===\r\n                        orderDetailsData.sellerData.seller ||\r\n                      this.props.user.id ===\r\n                        orderDetailsData.sellerData.seller._id\r\n                        ? orderDetailsData.items.map((itemData) => (\r\n                            <OrderItemAsSeller\r\n                              returnWindow={returnPeriodExpiresAt}\r\n                              combinedDate={combinedDate}\r\n                              orderData={orderDetailsData}\r\n                              itemData={itemData}\r\n                              key={itemData._id}\r\n                              orderStatus={orderStatus}\r\n                              returnRequest={\r\n                                returnRequestsOrder &&\r\n                                returnRequestsOrder.find(\r\n                                  (e) =>\r\n                                    JSON.stringify(e.item._id) ===\r\n                                    JSON.stringify(itemData._id)\r\n                                )\r\n                              }\r\n                            />\r\n                          ))\r\n                        : orderDetailsData.items.map((itemData) => (\r\n                            <OrderItemAsBuyer\r\n                              returnWindow={returnPeriodExpiresAt}\r\n                              combinedDate={combinedDate}\r\n                              orderData={orderDetailsData}\r\n                              itemData={itemData}\r\n                              key={itemData._id}\r\n                              orderStatus={orderStatus}\r\n                              returnRequest={\r\n                                returnRequestsOrder &&\r\n                                returnRequestsOrder.find(\r\n                                  (e) =>\r\n                                    JSON.stringify(e.item._id) ===\r\n                                    JSON.stringify(itemData._id)\r\n                                )\r\n                              }\r\n                            />\r\n                          ))}\r\n                      {}\r\n                    </Grid.Row>\r\n                  </Grid>\r\n                </Segment>\r\n              </Grid.Row>\r\n            </Grid>\r\n          </Segment>\r\n        </Grid.Column>\r\n      </Grid>\r\n    ) : (\r\n      <Label>\r\n        You are not authorized to access order details, kindly login first\r\n      </Label>\r\n    );\r\n  };\r\n\r\n  getSellerDropOfDetailsUI = (orderId) => {\r\n    return (\r\n      <Grid style={{ padding: \"2em 9em\" }}>\r\n        <ChooseSPAndTime next={this.sellerDropOffItemsInfo} orderId={this.props.match.params.id} seller={true} />\r\n      </Grid>\r\n    );\r\n  };\r\n\r\n  getBuyerPickUpDetailsUI = (orderId) => {\r\n    return (\r\n      <Grid style={{ padding: \"2em 9em\" }}>\r\n        <ChooseSPAndTime next={this.buyerPickUpItemsInfo} orderId={this.props.match.params.id} seller={false}/>\r\n      </Grid>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { orderDetailsData, displayedStep, returnRequestsOrder } = this.props;\r\n    let orderStatus = getOrderStatus(orderDetailsData);\r\n    return displayedStep &&\r\n      displayedStep === orderConstants.SELLER_STEP_DROP_OFF_INFO\r\n      ? this.getSellerDropOfDetailsUI(orderDetailsData._id)\r\n      : displayedStep && displayedStep === orderConstants.BUYER_PICK_UP_INFO\r\n      ? this.getBuyerPickUpDetailsUI(orderDetailsData._id)\r\n      : this.getOrderDetailsUI(orderDetailsData, orderStatus,returnRequestsOrder);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.clearState();\r\n  }\r\n}\r\n\r\nfunction mapState(state) {\r\n  const { user, loggedIn } = state.authentication;\r\n  const { orderDetailsData, returnRequestsOrder, displayedStep } = state.order;\r\n  return {\r\n    orderDetailsData,\r\n    displayedStep,\r\n    user,\r\n    loggedIn,\r\n    returnRequestsOrder,\r\n  };\r\n}\r\n\r\nconst actionCreators = {\r\n    viewOrder: orderActions.viewOrder,\r\n    viewOrderSeller: orderActions.viewOrderSeller,\r\n    sellerDropOffItemsInfo: orderActions.sellerDropOffItemsInfo,\r\n    buyerPickUpItemsInfo: orderActions.buyerPickUpItemsInfoUpdate,\r\n    clearState: orderActions.clearState,\r\n};\r\n\r\nconst connectedOrderDetailsPage = connect(\r\n  mapState,\r\n  actionCreators\r\n)(OrderDetailsPage);\r\n\r\nexport { connectedOrderDetailsPage as OrderDetailsPage };\r\n"]},"metadata":{},"sourceType":"module"}