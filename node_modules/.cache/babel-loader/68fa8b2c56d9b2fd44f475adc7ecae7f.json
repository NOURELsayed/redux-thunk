{"ast":null,"code":"var _jsxFileName = \"/media/norhan/New Volume/work/React-projects/test-redux/src/containers/Seller Decision/OrderDetailsSellerDecision.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Grid, Segment, Label, Card } from \"semantic-ui-react\";\nimport { getFormatedDate } from \"../../components/_shared/DateTimeFormat\";\nimport { Link } from \"react-router-dom\";\nimport { orderActions, validatorActions } from \"../../actions\";\nimport { OrderItemAsSeller } from \"../OrdersPage\";\nimport { getOrderStatus } from \"../OrdersPage/shared\";\nimport { CreateNewAuctionResell } from \"./CreateNewAuctionResell\";\nimport { CreateNewBuyNow } from \"./CreateNewBuyNow\";\n\nclass OrderDetailsSellerDecision extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      bidIncrement: \"\",\n      minPrice: \"\",\n      duration: \"\",\n      items: [],\n      itemsPostId: [],\n      whereToRender: [],\n      itemsFetcher: []\n    };\n\n    this.componentDidMount = async e => {\n      await this.props.viewOrder(this.props.urlOrderId);\n      let items = [];\n      let itemsPostId = [];\n      let whereToRender = [];\n      let itemsFetcher = [];\n      (await this.props.orderDetailsData.items) && this.props.orderDetailsData.items.map(item => {\n        if (item.status === \"waitingPickUp\" || item.status === \"rejectedByBuyer\") itemsFetcher.push(item);\n      });\n      itemsFetcher.map(item => {\n        if (item.status === \"waitingPickUp\" || item.status === \"rejectedByBuyer\") {\n          items.push({\n            id: item._id\n          });\n          itemsPostId.push({\n            id: item.post._id\n          });\n        }\n      });\n      let previousPostItemIdValue = itemsFetcher.length !== 0 && itemsFetcher[0].post._id;\n\n      if (itemsFetcher.length !== 0) {\n        for (let k = 0; k < itemsPostId.length; k++) {\n          if (itemsPostId[k].id === previousPostItemIdValue) {} else {\n            whereToRender.push(k - 1);\n            previousPostItemIdValue = itemsPostId[k].id;\n          }\n        }\n\n        whereToRender.push(itemsPostId.length - 1);\n      }\n\n      this.setState({\n        items: items,\n        itemsPostId,\n        whereToRender,\n        itemsFetcher\n      });\n    };\n\n    this.getOrderDetailsUI = orderDetailsData => {\n      let orderStatus = getOrderStatus(orderDetailsData);\n      const {\n        itemsFetcher\n      } = this.state;\n      return this.props.loggedIn && orderDetailsData.sellerData ? /*#__PURE__*/React.createElement(Grid, {\n        style: {\n          padding: \"2em 9em\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Grid.Column, {\n        width: 10,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Segment, {\n        style: {\n          padding: \"1em 1em\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Grid.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        color: \"teal\",\n        size: \"big\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }\n      }, \"Order Info\")), /*#__PURE__*/React.createElement(Grid.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Grid.Column, {\n        width: 7,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 19\n        }\n      }, \"Order \"), \" #\", orderDetailsData._id), /*#__PURE__*/React.createElement(Grid.Column, {\n        width: 7,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 19\n        }\n      }, \"Order Placed: \"), getFormatedDate(orderDetailsData.createdAt))), /*#__PURE__*/React.createElement(Grid.Row, {\n        stretched: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Grid.Column, {\n        width: 7,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 19\n        }\n      }, this.props.user.id === orderDetailsData.sellerData.seller || this.props.user.id === orderDetailsData.sellerData.seller._id ? /*#__PURE__*/React.createElement(Card.Content, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Card.Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 25\n        }\n      }, \"Order Buyer\"), /*#__PURE__*/React.createElement(Card.Description, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: `/user/${orderDetailsData.buyerData.buyer._id}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 27\n        }\n      }, orderDetailsData.buyerData.buyer.username))) : /*#__PURE__*/React.createElement(Card.Content, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Card.Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 25\n        }\n      }, \"Order Picker\"), /*#__PURE__*/React.createElement(Card.Description, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 25\n        }\n      }, orderDetailsData.buyerData.authorizedPerson ? orderDetailsData.buyerData.authorizedPerson.name : \"Yourself\")))), /*#__PURE__*/React.createElement(Grid.Column, {\n        width: 7,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Card.Content, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Card.Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 23\n        }\n      }, \"Order Summary\"), /*#__PURE__*/React.createElement(Card.Description, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 23\n        }\n      }, orderDetailsData.soldPrice === orderDetailsData.totalPrice ? /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 29\n        }\n      }, \"Total Price : \"), \" \", orderDetailsData.soldPrice, \" LE\") : /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"strike\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 31\n        }\n      }, \"Total Price : \"), \" \", orderDetailsData.totalPrice, \" LE\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 29\n        }\n      }, \"Discounted Price : \"), \" \", orderDetailsData.soldPrice, \" LE\")))))), /*#__PURE__*/React.createElement(Grid.Row, {\n        style: {\n          padding: \"1em 1em\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Segment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Grid.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        color: \"yellow\",\n        size: \"big\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 23\n        }\n      }, \"Items\")), /*#__PURE__*/React.createElement(Grid.Row, {\n        style: {\n          padding: \"1em 1em\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 21\n        }\n      }, itemsFetcher && itemsFetcher.map((itemData, i) => itemData.charging.SP === undefined && itemData.charging.user === undefined && (itemData.status === \"waitingPickUp\" || itemData.status === \"rejectedByBuyer\") && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(OrderItemAsSeller, {\n        orderData: orderDetailsData,\n        itemData: itemData,\n        key: itemData._id,\n        orderStatus: orderStatus,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 33\n        }\n      }), this.renderDecisionComponent(itemData, i))))))))))) : /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 7\n        }\n      }, \"Loading, please make sure you are logged in!\");\n    };\n  }\n\n  renderDecisionComponent(itemData, index) {\n    const {\n      whereToRender,\n      itemsPostId\n    } = this.state;\n\n    for (let k = 0; k < whereToRender.length; k++) {\n      if (whereToRender[k] === index) {\n        if (this.props.sellerDecision !== \"BuyNow\") {\n          return /*#__PURE__*/React.createElement(CreateNewAuctionResell, {\n            parentPostId: itemsPostId[index],\n            urlOrderId: this.props.urlOrderId,\n            sellerDecision: this.props.sellerDecision,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 13\n            }\n          });\n        } else {\n          return /*#__PURE__*/React.createElement(CreateNewBuyNow, {\n            parentPostId: itemsPostId[index],\n            urlOrderId: this.props.urlOrderId,\n            sellerDecision: this.props.sellerDecision,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 13\n            }\n          });\n        }\n      }\n    }\n  }\n\n  render() {\n    const {\n      orderDetailsData\n    } = this.props;\n    return this.getOrderDetailsUI(orderDetailsData);\n  }\n\n}\n\nfunction mapState(state) {\n  const {\n    user,\n    loggedIn\n  } = state.authentication;\n  const {\n    orderDetailsData,\n    returnRequestsOrder,\n    displayedStep\n  } = state.order;\n  const {\n    valid,\n    errors\n  } = state.validation;\n  return {\n    orderDetailsData,\n    displayedStep,\n    user,\n    loggedIn,\n    returnRequestsOrder,\n    valid,\n    errors\n  };\n}\n\nconst actionCreators = {\n  viewOrderSeller: orderActions.viewOrderSeller,\n  viewOrder: orderActions.viewOrder,\n  chooseBuyNow: orderActions.chooseBuyNow,\n  validateInput: validatorActions.validateInput,\n  validateForm: validatorActions.validateForm,\n  chooseAuctionWithMinPrice: orderActions.chooseAuctionWithMinPrice,\n  chooseAuctionWithoutMinPrice: orderActions.chooseAuctionWithoutMinPrice\n};\nconst connectedOrderDetailsSellerDecision = connect(mapState, actionCreators)(OrderDetailsSellerDecision);\nexport { connectedOrderDetailsSellerDecision as OrderDetailsSellerDecision };","map":{"version":3,"sources":["/media/norhan/New Volume/work/React-projects/test-redux/src/containers/Seller Decision/OrderDetailsSellerDecision.jsx"],"names":["React","Component","connect","Grid","Segment","Label","Card","getFormatedDate","Link","orderActions","validatorActions","OrderItemAsSeller","getOrderStatus","CreateNewAuctionResell","CreateNewBuyNow","OrderDetailsSellerDecision","state","bidIncrement","minPrice","duration","items","itemsPostId","whereToRender","itemsFetcher","componentDidMount","e","props","viewOrder","urlOrderId","orderDetailsData","map","item","status","push","id","_id","post","previousPostItemIdValue","length","k","setState","getOrderDetailsUI","orderStatus","loggedIn","sellerData","padding","createdAt","user","seller","buyerData","buyer","username","authorizedPerson","name","soldPrice","totalPrice","itemData","i","charging","SP","undefined","renderDecisionComponent","index","sellerDecision","render","mapState","authentication","returnRequestsOrder","displayedStep","order","valid","errors","validation","actionCreators","viewOrderSeller","chooseBuyNow","validateInput","validateForm","chooseAuctionWithMinPrice","chooseAuctionWithoutMinPrice","connectedOrderDetailsSellerDecision"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Grid, Segment, Label, Card } from \"semantic-ui-react\";\r\nimport { getFormatedDate } from \"../../components/_shared/DateTimeFormat\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { orderActions, validatorActions } from \"../../actions\";\r\nimport { OrderItemAsSeller } from \"../OrdersPage\";\r\nimport { getOrderStatus } from \"../OrdersPage/shared\";\r\nimport { CreateNewAuctionResell } from \"./CreateNewAuctionResell\";\r\nimport { CreateNewBuyNow } from \"./CreateNewBuyNow\";\r\n\r\nclass OrderDetailsSellerDecision extends Component {\r\n  state = {\r\n    bidIncrement: \"\",\r\n    minPrice: \"\",\r\n    duration: \"\",\r\n    items: [],\r\n    itemsPostId: [],\r\n    whereToRender: [],\r\n    itemsFetcher: [],\r\n  };\r\n  componentDidMount = async (e) => {\r\n    await this.props.viewOrder(this.props.urlOrderId);\r\n    let items = [];\r\n    let itemsPostId = [];\r\n    let whereToRender = [];\r\n    let itemsFetcher = [];\r\n\r\n    (await this.props.orderDetailsData.items) &&\r\n      this.props.orderDetailsData.items.map((item) => {\r\n        if (\r\n          item.status === \"waitingPickUp\" ||\r\n          item.status === \"rejectedByBuyer\"\r\n        )\r\n          itemsFetcher.push(item);\r\n      });\r\n\r\n\r\n    itemsFetcher.map((item) => {\r\n      if (\r\n        item.status === \"waitingPickUp\" ||\r\n        item.status === \"rejectedByBuyer\"\r\n      ) {\r\n        items.push({ id: item._id });\r\n        itemsPostId.push({ id: item.post._id });\r\n      }\r\n    });\r\n\r\n    let previousPostItemIdValue =\r\n      itemsFetcher.length !== 0 && itemsFetcher[0].post._id;\r\n    if (itemsFetcher.length !== 0) {\r\n      for (let k = 0; k < itemsPostId.length; k++) {\r\n        if (itemsPostId[k].id === previousPostItemIdValue) {\r\n        } else {\r\n          whereToRender.push(k - 1);\r\n          previousPostItemIdValue = itemsPostId[k].id;\r\n        }\r\n      }\r\n      whereToRender.push(itemsPostId.length - 1);\r\n    }\r\n\r\n    this.setState({ items: items, itemsPostId, whereToRender, itemsFetcher });\r\n  };\r\n\r\n  renderDecisionComponent(itemData, index) {\r\n    const { whereToRender, itemsPostId } = this.state;\r\n    for (let k = 0; k < whereToRender.length; k++) {\r\n      if (whereToRender[k] === index) {\r\n        if (this.props.sellerDecision !== \"BuyNow\") {\r\n          return (\r\n            <CreateNewAuctionResell\r\n              parentPostId={itemsPostId[index]}\r\n              urlOrderId={this.props.urlOrderId}\r\n              sellerDecision={this.props.sellerDecision}\r\n            />\r\n          );\r\n        } else {\r\n          return (\r\n            <CreateNewBuyNow\r\n              parentPostId={itemsPostId[index]}\r\n              urlOrderId={this.props.urlOrderId}\r\n              sellerDecision={this.props.sellerDecision}\r\n            />\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getOrderDetailsUI = (orderDetailsData) => {\r\n    let orderStatus = getOrderStatus(orderDetailsData);\r\n    const {itemsFetcher} =this.state;\r\n    return this.props.loggedIn && orderDetailsData.sellerData ? (\r\n      <Grid style={{ padding: \"2em 9em\" }}>\r\n        <Grid.Column width={10}>\r\n          <Segment style={{ padding: \"1em 1em\" }}>\r\n            <Grid>\r\n              <Grid.Row>\r\n                <Label color='teal' size='big'>\r\n                  Order Info\r\n                </Label>\r\n              </Grid.Row>\r\n              <Grid.Row>\r\n                <Grid.Column width={7}>\r\n                  <strong>Order </strong> #{orderDetailsData._id}\r\n                </Grid.Column>\r\n                <Grid.Column width={7}>\r\n                  <strong>Order Placed: </strong>\r\n                  {getFormatedDate(orderDetailsData.createdAt)}\r\n                </Grid.Column>\r\n              </Grid.Row>\r\n              <Grid.Row stretched>\r\n                <Grid.Column width={7}>\r\n                  <Card>\r\n                    {this.props.user.id ===\r\n                      orderDetailsData.sellerData.seller ||\r\n                    this.props.user.id ===\r\n                      orderDetailsData.sellerData.seller._id ? (\r\n                      <Card.Content>\r\n                        <Card.Header>Order Buyer</Card.Header>\r\n                        <Card.Description>\r\n                          <Link\r\n                            to={`/user/${orderDetailsData.buyerData.buyer._id}`}\r\n                          >\r\n                            {orderDetailsData.buyerData.buyer.username}\r\n                          </Link>\r\n                        </Card.Description>\r\n                      </Card.Content>\r\n                    ) : (\r\n                      <Card.Content>\r\n                        <Card.Header>Order Picker</Card.Header>\r\n                        <Card.Description>\r\n                          {orderDetailsData.buyerData.authorizedPerson\r\n                            ? orderDetailsData.buyerData.authorizedPerson.name\r\n                            : \"Yourself\"}\r\n                        </Card.Description>\r\n                      </Card.Content>\r\n                    )}\r\n                  </Card>\r\n                </Grid.Column>\r\n                <Grid.Column width={7}>\r\n                  <Card>\r\n                    <Card.Content>\r\n                      <Card.Header>Order Summary</Card.Header>\r\n                      <Card.Description>\r\n                        {orderDetailsData.soldPrice ===\r\n                        orderDetailsData.totalPrice ? (\r\n                          <React.Fragment>\r\n                            <strong>Total Price : </strong>{\" \"}\r\n                            {orderDetailsData.soldPrice} LE\r\n                          </React.Fragment>\r\n                        ) : (\r\n                          <React.Fragment>\r\n                            <strike>\r\n                              <strong>Total Price : </strong>{\" \"}\r\n                              {orderDetailsData.totalPrice} LE\r\n                            </strike>\r\n                            <br />\r\n                            <strong>Discounted Price : </strong>{\" \"}\r\n                            {orderDetailsData.soldPrice} LE\r\n                          </React.Fragment>\r\n                        )}\r\n                      </Card.Description>\r\n                    </Card.Content>\r\n                  </Card>\r\n                </Grid.Column>\r\n              </Grid.Row>\r\n              <Grid.Row style={{ padding: \"1em 1em\" }}>\r\n                <Segment>\r\n                  <Grid>\r\n                    <Grid.Row>\r\n                      <Label color='yellow' size='big'>\r\n                        Items\r\n                      </Label>\r\n                    </Grid.Row>\r\n                    <Grid.Row style={{ padding: \"1em 1em\" }}>\r\n                      {itemsFetcher &&\r\n                        itemsFetcher.map(\r\n                          (itemData, i) =>\r\n                            itemData.charging.SP === undefined &&\r\n                            itemData.charging.user === undefined &&\r\n                            (itemData.status === \"waitingPickUp\" ||\r\n                              itemData.status === \"rejectedByBuyer\") && (\r\n                              <>\r\n                                <OrderItemAsSeller\r\n                                  orderData={orderDetailsData}\r\n                                  itemData={itemData}\r\n                                  key={itemData._id}\r\n                                  orderStatus={orderStatus}\r\n                                />\r\n                                {this.renderDecisionComponent(itemData, i)}\r\n                              </>\r\n                            )\r\n                        )}\r\n                    </Grid.Row>\r\n                  </Grid>\r\n                </Segment>\r\n              </Grid.Row>\r\n            </Grid>\r\n          </Segment>\r\n        </Grid.Column>\r\n      </Grid>\r\n    ) : (\r\n      <Label>Loading, please make sure you are logged in!</Label>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { orderDetailsData } = this.props;\r\n    return this.getOrderDetailsUI(orderDetailsData);\r\n  }\r\n}\r\nfunction mapState(state) {\r\n  const { user, loggedIn } = state.authentication;\r\n  const { orderDetailsData, returnRequestsOrder, displayedStep } = state.order;\r\n  const { valid, errors } = state.validation;\r\n  return {\r\n    orderDetailsData,\r\n    displayedStep,\r\n    user,\r\n    loggedIn,\r\n    returnRequestsOrder,\r\n    valid,\r\n    errors,\r\n  };\r\n}\r\n\r\nconst actionCreators = {\r\n  viewOrderSeller: orderActions.viewOrderSeller,\r\n  viewOrder: orderActions.viewOrder,\r\n  chooseBuyNow: orderActions.chooseBuyNow,\r\n  validateInput: validatorActions.validateInput,\r\n  validateForm: validatorActions.validateForm,\r\n  chooseAuctionWithMinPrice: orderActions.chooseAuctionWithMinPrice,\r\n  chooseAuctionWithoutMinPrice: orderActions.chooseAuctionWithoutMinPrice,\r\n};\r\n\r\nconst connectedOrderDetailsSellerDecision = connect(\r\n  mapState,\r\n  actionCreators\r\n)(OrderDetailsSellerDecision);\r\n\r\nexport { connectedOrderDetailsSellerDecision as OrderDetailsSellerDecision };\r\n"]},"metadata":{},"sourceType":"module"}